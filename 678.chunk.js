"use strict";(self.webpackChunkwave_sight=self.webpackChunkwave_sight||[]).push([[678],{2678:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var r=n(7294),a=n(4735),l=n(2599),c=n(9704),o=n(1054),m=n(9501),u=function(e){return String(e).padStart(2,"0")},s=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),a=e.getHours(),l=e.getMinutes(),c=e.getSeconds();return"".concat(t,"-").concat(u(n),"-").concat(u(r)," ").concat(u(a),":").concat(u(l),":").concat(u(c))},i=n(4564),d=n(4051),f=n(1555),E=n(2318),h=n(2315),b=n(4138),p=n(5005),v=n(1441),y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},y.apply(this,arguments)},Z=n(4670),N=m.Ry().shape({userName:m.Z_().required("required!").min(3,"Words cannot be less than 3!").max(15,"Words should be less than 15!"),userEmail:m.Z_().required("required!").email("Invalid format!").min(12,"Words cannot be less than 12!").max(26,"Words should be less than 26!"),userAddress:m.Z_().required("required!").min(6,"Words cannot be less than 6!").max(30,"Words should be less than 30!"),userPhone:m.Z_().required("Required!").test("is-valid-phone","Invalid format!",(function(e){return!!e&&/^0\d{9}$/.test(e)})).min(10,"Words cannot be less than 10!").max(10,"Words should be less than 10!"),deliveryMethod:m.Z_().required("required!"),payMethod:m.Z_().required("required!"),remark:m.Z_().max(25,"Words should be less than 30!"),invoice:m.Ry().shape({type:m.Z_().required("required!!"),number:m.Z_().when("type",{is:"Paper invoice",then:m.Z_().notRequired(),otherwise:m.Z_().required("required!").min(8,"Words cannot be less than 8!").max(12,"Words should be less than 12!")})})}),g=function(e){var t=e.userInfo,n=(0,a.s0)(),l=t||{},m=l._id,u=l.user_address,g=l.user_email,x=l.user_name,_=l.user_phone,k=l.shopping_cart,w=(0,c.I0)();return r.createElement(o.J9,{initialValues:{userName:"",userEmail:"",userAddress:"",userPhone:null,deliveryMethod:"",payMethod:"",remark:"",invoice:{type:"",number:""}},validationSchema:N,onSubmit:function(e){var t=s(),r=y({user_id:m,order_id:Z.generate(),shopping_cart:k,order_status:"Processing",order_date:t},e);w({type:v.v.CREATE_ORDER_REQUEST,payload:r}),n("/user/order")},enableReinitialize:!0},(function(e){var t=e.handleSubmit,n=e.setFieldValue,a=e.values;return r.createElement(i.Z,{className:"d-flex flex-column p-3",onSubmit:t},r.createElement(i.Z.Label,{as:"h3",className:"border-bottom font-title text-center"},"Receiver"),r.createElement(d.Z,{className:"justify-items-center"},r.createElement(i.Z.Group,{as:f.Z,xs:"4",md:"3",lg:"3",className:"my-2"},r.createElement(i.Z.Label,{className:"font-content"},"Full Name"),r.createElement(o.gN,{name:"userName"},(function(e){var t=e.field;return r.createElement(i.Z.Control,y({type:"text",placeholder:"Name"},t))})),r.createElement(o.Bc,{name:"userName"},(function(e){return r.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},e)}))),r.createElement(i.Z.Group,{as:f.Z,xs:"8",md:"7",lg:"4",className:"my-2"},r.createElement(i.Z.Label,{className:"font-content"},"Email"),r.createElement(o.gN,{name:"userEmail"},(function(e){var t=e.field;return r.createElement(i.Z.Control,y({type:"text",placeholder:"Email"},t))})),r.createElement(o.Bc,{name:"userEmail"},(function(e){return r.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},e)}))),r.createElement(i.Z.Group,{as:f.Z,xs:"4",md:"3",lg:"3",className:"my-2"},r.createElement(i.Z.Label,{className:"font-content"},"Phone"),r.createElement(o.gN,{name:"userPhone"},(function(e){var t=e.field;return r.createElement(i.Z.Control,y({type:"text",placeholder:"Phone"},t))})),r.createElement(o.Bc,{name:"userPhone"},(function(e){return r.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},e)}))),r.createElement(i.Z.Group,{as:f.Z,xs:"8",md:"7",lg:"6",className:"my-2"},r.createElement(i.Z.Label,{className:"font-content"},"Address"),r.createElement(o.gN,{type:"text",name:"userAddress",placeholder:"Address"},(function(e){var t=e.field;return r.createElement(i.Z.Control,y({},t))})),r.createElement(o.Bc,{name:"userAddress"},(function(e){return r.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},e)}))),r.createElement(i.Z.Group,null,r.createElement(i.Z.Check,{type:"checkbox",label:"Use user profile",className:"font-content my-2",onChange:function(e){return function(e,t){var n=[{key:"userName",value:x},{key:"userEmail",value:g},{key:"userPhone",value:_},{key:"userAddress",value:u}];e?n.forEach((function(e){t(e.key,e.value)})):n.forEach((function(e){t(e.key,"")}))}(e.target.checked,n)}}))),r.createElement(d.Z,null,r.createElement(f.Z,{lg:"6"},r.createElement(i.Z.Label,{as:"h3",className:"border-bottom font-title my-2 text-center"},"Delivery method"),r.createElement(i.Z.Group,null,r.createElement(o.gN,{name:"deliveryMethod"},(function(e){var t=e.field;return["7-11 Store","Family store","Home delivery"].map((function(e,n){return r.createElement(i.Z.Check,y({key:n,type:"radio",label:e},t,{value:e,className:"font-content my-2"}))}))})),r.createElement(o.Bc,{name:"deliveryMethod"},(function(e){return r.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},e)})))),r.createElement(f.Z,{lg:"6"},r.createElement(i.Z.Label,{as:"h3",className:"border-bottom font-title my-2 text-center"},"Pay method"),r.createElement(i.Z.Group,null,r.createElement(o.gN,{name:"payMethod"},(function(e){var t=e.field;return["Cash on delivery ","Credit card"].map((function(e,n){return r.createElement(i.Z.Check,y({key:n,type:"radio",label:e},t,{value:e,className:"font-content my-2"}))}))})),r.createElement(o.Bc,{name:"payMethod"},(function(e){return r.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},e)}))))),r.createElement(d.Z,{className:"my-2"},r.createElement(f.Z,{lg:"6"},r.createElement(i.Z.Group,{className:"my-2"},r.createElement(i.Z.Label,{as:"h3",className:"border-bottom font-title my-2 text-center"},"Remark"),r.createElement(o.gN,{name:"remark"},(function(e){var t=e.field;return r.createElement(i.Z.Control,y({type:"text",as:"textarea",rows:3},t))})),r.createElement(o.Bc,{name:"remark"},(function(e){return r.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},e)})))),r.createElement(f.Z,{lg:"6"},r.createElement(i.Z.Label,{as:"h3",className:"border-bottom font-title my-2 text-center"},"Invoice"),r.createElement(E.Z,{className:"d-flex mb-3 my-2"},r.createElement(o.gN,{name:"invoice.type",type:"text"},(function(e){var t=e.field,n=e.form;return r.createElement(r.Fragment,null,r.createElement(h.Z,y({variant:"outline-secondary",title:t.value||"Dropdown",onSelect:function(e){n.setFieldValue(t.name,e),n.setFieldValue("invoice.number",""),n.setFieldTouched("invoice.number",!1)}},t),r.createElement(b.Z.Item,{eventKey:"Donation"},"Donation"),r.createElement(b.Z.Item,{eventKey:"Phone carrier"},"Phone carrier"),r.createElement(b.Z.Item,{eventKey:"Natural individual"},"Natural individual"),r.createElement(b.Z.Item,{eventKey:"Paper invoice"},"Paper invoice")))})),r.createElement(o.gN,{name:"invoice.number"},(function(e){var t=e.field,n=e.form.values;return"Paper invoice"===n.invoice.type||""===n.invoice.type?r.createElement(i.Z.Control,y({disabled:!0},t)):r.createElement(i.Z.Control,y({type:"text"},t))}))),r.createElement(o.Bc,{className:"ms-2",name:"invoice.number"},(function(e){return r.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},"Paper invoice"===a.invoice.type?null:e)})))),r.createElement(p.Z,{type:"submit",className:"align-self-end bg-beige font-btn fs-5 fw-bold text-black"},"Submit"))}))},x=n(6438),_=n(7088),k=n(6952),w=n(5147),C=function(){var e=(0,a.TH)(),t=(0,a.s0)(),n=(0,l.fp)(x._,e),o=(0,c.v9)((function(e){return e.user})),m=o.info,u=o.isLogin,s=m.shopping_cart,i=m._id,E=(0,r.useState)(0),h=E[0],b=E[1],p=localStorage.getItem("loginToken");(0,r.useEffect)((function(){(p||u)&&0!==(null==s?void 0:s.length)||t("/")}),[u]);var v=(0,r.useCallback)((function(e){b((function(t){return t+e}))}),[]);return r.createElement(r.Fragment,null,r.createElement(k.Z,{matches:n}),r.createElement("div",{className:"bg-gray my-2"},r.createElement("h1",{className:"border font-title mt-2 text-center text-white"},"Checkout")),r.createElement(d.Z,{className:"d-flex flex-column min-vh-100 my-2 p-2"},r.createElement(f.Z,null,r.createElement(w.Z,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"border-light-gray"},r.createElement("thead",null,r.createElement("tr",{className:"font-content fs-5"},r.createElement("th",null,"No."),r.createElement("th",null,"Image"),r.createElement("th",null,"Name"),r.createElement("th",null,"Color"),r.createElement("th",null,"Size"),r.createElement("th",null,"Quantity"),r.createElement("th",null,"Price"))),r.createElement("tbody",null,null==s?void 0:s.map((function(e,t){return r.createElement(_.Z,{key:e.product_mark,number:t,user_id:i,item:e,onTotalCalculate:v,isEdit:!1})})))),r.createElement("div",{className:"font-content text-end"},r.createElement("h3",{className:"fw-bold"}," ","Totall:",r.createElement("span",{className:"bg-light-blue"},Math.floor(h)),"$"))),r.createElement(f.Z,{className:"border my-2"},r.createElement(g,{userInfo:m}))))}},6952:function(e,t,n){var r=n(7294),a=n(5412),l=n(9655);t.Z=function(e){var t=location.pathname.startsWith("/wave-sight")?location.pathname.substring("/wave-sight".length):location.pathname;return r.createElement(a.Z,{className:"m-3"},e.matches.map((function(n,c){var o=n.route,m=o.path,u=o.breadcrumbName;return n.pathname===t?r.createElement(a.Z.Item,{className:"font-content fs-5 fw-bold",key:c,active:!0},"Detail"===u?e.name:u):r.createElement(a.Z.Item,{className:"font-content fs-5 fw-bold",key:c},r.createElement(l.OL,{to:m},u))})))}},7088:function(e,t,n){var r=n(885),a=n(7294),l=n(1330),c=n(5005),o=function(e){var t=e.item,n=e.number,o=e.user_id,m=void 0===o?"":o,u=e.onTotalCalculate,s=e.handleItemQuantity,i=void 0===s?null:s,d=e.onDeleteItem,f=void 0===d?null:d,E=e.isEdit,h=void 0===E||E,b=t.product_mark,p=t.product_image,v=t.product_name,y=t.product_color,Z=t.product_size,N=t.product_quantity,g=t.product_discount,x=t.product_price,_=(0,a.useRef)(N),k=(0,a.useState)(!1),w=(0,r.Z)(k,2),C=w[0],q=w[1];(0,a.useEffect)((function(){u(x*_.current*g)}),[]);var L=function(e){var t=e.target.value;return"+"===t?(_.current>=1&&(_.current++,u(x*g),q(!1)),void i({user_id:m,product_mark:b,product_quantity:_.current})):"-"===t?_.current<=1?void q(!0):(_.current--,u(-x*g),void i({user_id:m,product_mark:b,product_quantity:_.current})):void 0};return a.createElement("tr",{className:"border-light-gray font-content text-center"},a.createElement("th",null,n+1),a.createElement("th",null,a.createElement(l.Z,{fluid:!0,responsive:"md",thumbnail:!0,width:100,height:100,className:"d-block mx-auto",src:p})),a.createElement("th",null,v),a.createElement("th",null,y),a.createElement("th",null,Z),a.createElement("th",null,h?a.createElement("div",{className:"d-flex"},a.createElement("input",{className:"btn-gray me-1",type:"button",disabled:C,value:"-",onClick:L}),_.current,a.createElement("input",{className:"btn-gray ms-1",type:"button",value:"+",onClick:L})):_.current),a.createElement("th",null,"NT",Math.floor(x*_.current*g),"$"),h?a.createElement("th",null,a.createElement(c.Z,{className:"border border-1 border-black btn-beige font-content mt-2",onClick:function(){return f({user_id:m,product_mark:b},x*_.current*g)}},"Delete")):null)};function m(e,t){return e.item.product_quantity===t.item.product_quantity}t.Z=(0,a.memo)(o,m)}}]);