"use strict";(self.webpackChunkwave_sight=self.webpackChunkwave_sight||[]).push([[678],{2821:function(e,t,n){n.d(t,{Z:function(){return h}});var a=n(7294),r=n(9704),l=n(5147),c=n(5005),o=n(1441),m=n(885),s=n(1330),u=function(e){var t=e.item,n=e.number,r=(e.user_id,e.onTotalCalculate),l=e.onChangeQuantity,o=e.onDeleteItem,u=e.isEdit,i=t.product_mark,d=t.product_image,f=t.product_name,E=t.product_color,h=t.product_size,b=t.product_quantity,p=t.product_discount,y=t.product_price,v=(0,a.useState)(!1),Z=(0,m.Z)(v,2),g=Z[0],N=Z[1];(0,a.useEffect)((function(){r(y*b*p)}),[]);var _=function(e){switch(e.target.value){case"+":b>=1&&(g&&N(!1),r(y*p),l({product_mark:i,product_quantity:b+1}));break;case"-":if(b<=1)return void N(!0);r(-y*p),l({product_mark:i,product_quantity:b-1})}};return a.createElement("tr",{className:"border-light-gray font-content text-center"},a.createElement("th",null,n+1),a.createElement("th",null,a.createElement(s.Z,{fluid:!0,responsive:"md",thumbnail:!0,width:100,height:100,className:"d-block mx-auto",src:d})),a.createElement("th",null,f),a.createElement("th",null,E),a.createElement("th",null,h),a.createElement("th",null,u?a.createElement("div",{className:"d-flex"},a.createElement("input",{className:"btn-gray me-1",type:"button",disabled:g,value:"-",onClick:_}),b,a.createElement("input",{className:"btn-gray ms-1",type:"button",value:"+",onClick:_})):b),a.createElement("th",null,"NT",Math.floor(y*b*p),"$"),u?a.createElement("th",null,a.createElement(c.Z,{className:"border border-1 border-black btn-beige font-content mt-2",onClick:function(){return o(i,y*b*p)}},"Delete")):null)};function i(e,t){return e.item===t.item}var d=(0,a.memo)(u,i),f=n(4735),E=function(){return E=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},E.apply(this,arguments)},h=function(e){var t=e.shopping_cart,n=e.setIsLoading,m=e.user_id,s=e.isEdit,u=(0,f.s0)(),i=(0,r.I0)(),h=(0,a.useState)(0),b=h[0],p=h[1],y=function(e){p((function(t){return t+e}))},v=function(e,t){p((function(e){return e-t})),i({type:o.v.DELETE_CART_ITEM_REQUEST,payload:{user_id:m,product_mark:e}})},Z=function(e){n(!0),i({type:o.v.UPDATE_ITEM_QUANTITY_REQUEST,payload:E({user_id:m},e)}),setTimeout((function(){n(!1)}),1e3)};return a.createElement(a.Fragment,null,a.createElement(l.Z,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"border-light-gray"},a.createElement("thead",null,a.createElement("tr",{className:"font-content fs-6 text-center"},a.createElement("th",null,"No."),a.createElement("th",null,"Image"),a.createElement("th",null,"Name"),a.createElement("th",null,"Color"),a.createElement("th",null,"Size"),a.createElement("th",null,"Quantity"),a.createElement("th",null,"Price"),s&&a.createElement("th",null,"Edit"))),a.createElement("tbody",null,null==t?void 0:t.map((function(e,t){return a.createElement(d,{key:e.product_mark,number:t,item:e,onDeleteItem:v,onTotalCalculate:y,onChangeQuantity:Z,isEdit:s})})))),a.createElement("hr",{className:"border-1"}),a.createElement("h4",{className:"fw-bold font-content mt-2 text-end"},"Total:",a.createElement("span",{className:"bg-light-blue"},Math.floor(b)),"$"),s&&a.createElement("div",{className:"d-flex fs-2 justify-content-end mt-4"},a.createElement(c.Z,{size:"sm",className:"bg-beige border border-black font-btn fs-5 fw-bold text-black",onClick:function(){0!==t.length?u("/user/checkout"):i({type:o.v.SET_MESSAGE_SEND,payload:"Cart is empty."})}},"Confirm")))}},2678:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var a=n(7294),r=n(4735),l=n(2599),c=n(9704),o=n(1054),m=n(9501),s=function(e){return String(e).padStart(2,"0")},u=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),r=e.getHours(),l=e.getMinutes(),c=e.getSeconds();return"".concat(t,"-").concat(s(n),"-").concat(s(a)," ").concat(s(r),":").concat(s(l),":").concat(s(c))},i=n(4564),d=n(4051),f=n(1555),E=n(2318),h=n(2315),b=n(4138),p=n(5005),y=n(1441),v=function(){return v=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},v.apply(this,arguments)},Z=n(4670),g=m.Ry().shape({userName:m.Z_().required("required!").min(3,"Words cannot be less than 3!").max(15,"Words should be less than 15!"),userEmail:m.Z_().required("required!").email("Invalid format!").min(12,"Words cannot be less than 12!").max(26,"Words should be less than 26!"),userAddress:m.Z_().required("required!").min(6,"Words cannot be less than 6!").max(30,"Words should be less than 30!"),userPhone:m.Z_().required("Required!").test("is-valid-phone","Invalid format!",(function(e){return!!e&&/^0\d{9}$/.test(e)})).min(10,"Words cannot be less than 10!").max(10,"Words should be less than 10!"),deliveryMethod:m.Z_().required("required!"),payMethod:m.Z_().required("required!"),remark:m.Z_().max(25,"Words should be less than 30!"),invoice:m.Ry().shape({type:m.Z_().required("required!!"),number:m.Z_().when("type",{is:"Paper invoice",then:m.Z_().notRequired(),otherwise:m.Z_().required("required!").min(8,"Words cannot be less than 8!").max(12,"Words should be less than 12!")})})}),N=function(e){var t=e.userInfo,n=(0,r.s0)(),l=t||{},m=l._id,s=l.user_address,N=l.user_email,_=l.user_name,x=l.user_phone,k=l.shopping_cart,w=(0,c.I0)();return a.createElement(o.J9,{initialValues:{userName:"",userEmail:"",userAddress:"",userPhone:null,deliveryMethod:"",payMethod:"",remark:"",invoice:{type:"",number:""}},validationSchema:g,onSubmit:function(e){var t=u(),a=v({user_id:m,order_id:Z.generate(),shopping_cart:k,order_status:"Processing",order_date:t},e);w({type:y.v.CREATE_ORDER_REQUEST,payload:a}),n("/user/order")},enableReinitialize:!0},(function(e){var t=e.handleSubmit,n=e.setFieldValue,r=e.values;return a.createElement(i.Z,{className:"d-flex flex-column p-3",onSubmit:t},a.createElement(i.Z.Label,{as:"h3",className:"border-bottom font-title text-center"},"Receiver"),a.createElement(d.Z,{className:"justify-items-center"},a.createElement(i.Z.Group,{as:f.Z,xs:"4",md:"3",lg:"3",className:"my-2"},a.createElement(i.Z.Label,{className:"font-content"},"Full Name"),a.createElement(o.gN,{name:"userName"},(function(e){var t=e.field;return a.createElement(i.Z.Control,v({type:"text",placeholder:"Name"},t))})),a.createElement(o.Bc,{name:"userName"},(function(e){return a.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},e)}))),a.createElement(i.Z.Group,{as:f.Z,xs:"8",md:"7",lg:"4",className:"my-2"},a.createElement(i.Z.Label,{className:"font-content"},"Email"),a.createElement(o.gN,{name:"userEmail"},(function(e){var t=e.field;return a.createElement(i.Z.Control,v({type:"text",placeholder:"Email"},t))})),a.createElement(o.Bc,{name:"userEmail"},(function(e){return a.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},e)}))),a.createElement(i.Z.Group,{as:f.Z,xs:"4",md:"3",lg:"3",className:"my-2"},a.createElement(i.Z.Label,{className:"font-content"},"Phone"),a.createElement(o.gN,{name:"userPhone"},(function(e){var t=e.field;return a.createElement(i.Z.Control,v({type:"text",placeholder:"Phone"},t))})),a.createElement(o.Bc,{name:"userPhone"},(function(e){return a.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},e)}))),a.createElement(i.Z.Group,{as:f.Z,xs:"8",md:"7",lg:"6",className:"my-2"},a.createElement(i.Z.Label,{className:"font-content"},"Address"),a.createElement(o.gN,{type:"text",name:"userAddress",placeholder:"Address"},(function(e){var t=e.field;return a.createElement(i.Z.Control,v({},t))})),a.createElement(o.Bc,{name:"userAddress"},(function(e){return a.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},e)}))),a.createElement(i.Z.Group,null,a.createElement(i.Z.Check,{type:"checkbox",label:"Use user profile",className:"font-content my-2",onChange:function(e){return function(e,t){var n=[{key:"userName",value:_},{key:"userEmail",value:N},{key:"userPhone",value:x},{key:"userAddress",value:s}];e?n.forEach((function(e){t(e.key,e.value)})):n.forEach((function(e){t(e.key,"")}))}(e.target.checked,n)}}))),a.createElement(d.Z,null,a.createElement(f.Z,{lg:"6"},a.createElement(i.Z.Label,{as:"h3",className:"border-bottom font-title my-2 text-center"},"Delivery method"),a.createElement(i.Z.Group,null,a.createElement(o.gN,{name:"deliveryMethod"},(function(e){var t=e.field;return["7-11 Store","Family store","Home delivery"].map((function(e,n){return a.createElement(i.Z.Check,v({key:n,type:"radio",label:e},t,{value:e,className:"font-content my-2"}))}))})),a.createElement(o.Bc,{name:"deliveryMethod"},(function(e){return a.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},e)})))),a.createElement(f.Z,{lg:"6"},a.createElement(i.Z.Label,{as:"h3",className:"border-bottom font-title my-2 text-center"},"Pay method"),a.createElement(i.Z.Group,null,a.createElement(o.gN,{name:"payMethod"},(function(e){var t=e.field;return["Cash on delivery ","Credit card"].map((function(e,n){return a.createElement(i.Z.Check,v({key:n,type:"radio",label:e},t,{value:e,className:"font-content my-2"}))}))})),a.createElement(o.Bc,{name:"payMethod"},(function(e){return a.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},e)}))))),a.createElement(d.Z,{className:"my-2"},a.createElement(f.Z,{lg:"6"},a.createElement(i.Z.Group,{className:"my-2"},a.createElement(i.Z.Label,{as:"h3",className:"border-bottom font-title my-2 text-center"},"Remark"),a.createElement(o.gN,{name:"remark"},(function(e){var t=e.field;return a.createElement(i.Z.Control,v({type:"text",as:"textarea",rows:3},t))})),a.createElement(o.Bc,{name:"remark"},(function(e){return a.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},e)})))),a.createElement(f.Z,{lg:"6"},a.createElement(i.Z.Label,{as:"h3",className:"border-bottom font-title my-2 text-center"},"Invoice"),a.createElement(E.Z,{className:"d-flex mb-3 my-2"},a.createElement(o.gN,{name:"invoice.type",type:"text"},(function(e){var t=e.field,n=e.form;return a.createElement(a.Fragment,null,a.createElement(h.Z,v({variant:"outline-secondary",title:t.value||"Dropdown",onSelect:function(e){n.setFieldValue(t.name,e),n.setFieldValue("invoice.number",""),n.setFieldTouched("invoice.number",!1)}},t),a.createElement(b.Z.Item,{eventKey:"Donation"},"Donation"),a.createElement(b.Z.Item,{eventKey:"Phone carrier"},"Phone carrier"),a.createElement(b.Z.Item,{eventKey:"Natural individual"},"Natural individual"),a.createElement(b.Z.Item,{eventKey:"Paper invoice"},"Paper invoice")))})),a.createElement(o.gN,{name:"invoice.number"},(function(e){var t=e.field,n=e.form.values;return"Paper invoice"===n.invoice.type||""===n.invoice.type?a.createElement(i.Z.Control,v({disabled:!0},t)):a.createElement(i.Z.Control,v({type:"text"},t))}))),a.createElement(o.Bc,{className:"ms-2",name:"invoice.number"},(function(e){return a.createElement(i.Z.Label,{className:"d-flex fw-bold me-1 text-red"},"Paper invoice"===r.invoice.type?null:e)})))),a.createElement(p.Z,{type:"submit",className:"align-self-end bg-beige font-btn fs-5 fw-bold text-black"},"Submit"))}))},_=n(6438),x=n(2821),k=n(6952),w=function(){var e=(0,r.TH)(),t=(0,r.s0)(),n=(0,l.fp)(_._,e),o=(0,c.v9)((function(e){return e.user})),m=o.info,s=o.isLogin,u=m.shopping_cart,i=localStorage.getItem("loginToken");return(0,a.useEffect)((function(){(i||s)&&0!==(null==u?void 0:u.length)||t("/")}),[s]),a.createElement(a.Fragment,null,a.createElement(k.Z,{matches:n}),a.createElement("div",{className:"bg-gray my-2"},a.createElement("h1",{className:"border font-title mt-2 text-center text-white"},"Checkout")),a.createElement(d.Z,{className:"d-flex flex-column min-vh-100 my-2 p-2"},a.createElement(f.Z,null,a.createElement(x.Z,{shopping_cart:u,isEdit:!1})),a.createElement(f.Z,{className:"border my-2"},a.createElement(N,{userInfo:m}))))}},6952:function(e,t,n){var a=n(7294),r=n(5412),l=n(9655);t.Z=function(e){var t=location.pathname.startsWith("/wave-sight")?location.pathname.substring("/wave-sight".length):location.pathname;return a.createElement(r.Z,{className:"m-3"},e.matches.map((function(n,c){var o=n.route,m=o.path,s=o.breadcrumbName;return n.pathname===t?a.createElement(r.Z.Item,{className:"font-content fs-5 fw-bold",key:c,active:!0},"Detail"===s?e.name:s):a.createElement(r.Z.Item,{className:"font-content fs-5 fw-bold",key:c},a.createElement(l.OL,{to:m},s))})))}}}]);